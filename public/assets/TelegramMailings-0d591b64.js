import{_ as se,C as O,n as he,a,o as s,j as C,m as n,g as e,b as k,F as j,l as R,p as Ce,q as ue,v as ce,d as me,u as pe,s as _e,x as ye,w as re,r as J,c as v,e as t,i as o,f as g,t as A,y as B,z as P,h as be,k as Me,A as xe}from"./app-4f42dbc1.js";import{V as we}from"./VueSplash-1893e02b.js";import{H as K,P as ke}from"./HeaderCell-2834f7a9.js";const Ae={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:10},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],isLoading:!0}},methods:{init(){console.log("init"),this.savedMedia=this.media,this.savedMedia.forEach((i,u)=>{this.savedMedia[u].url||(this.savedMedia[u].url=i.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(i){this.isLoading=!0;let u=i.target.files;for(var h=0;h<u.length;h++)if(!this.max||this.allMedia.length<this.max)if(u[h].size<=this.maxFilesize*1e6){let p={url:URL.createObjectURL(u[h]),name:u[h].name,file:u[h]};this.addedMedia.push(p),this.$emit("change",this.allMedia),this.$emit("add",p,this.addedMedia)}else{this.$emit("maxFilesize",u[h].size),this.warnings&&O.swalMessage("error","Файл для загрузки превышает максимально допустимый размер: "+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&O.swalMessage("error","Было достигнуто макимальное количество файлов: "+this.max);break}i.target.value=null,this.isLoading=!1},removeAddedMedia(i){let u=this.addedMedia[i];this.addedMedia.splice(i,1),this.$emit("change",this.allMedia),this.$emit("remove",u,this.removedMedia)},removeSavedMedia(i){let u=this.savedMedia[i];this.removedMedia.push(u),this.savedMedia.splice(i,1),this.$emit("change",this.allMedia),this.$emit("remove",u,this.removedMedia)},async clearMediaAndDownload(){this.removedMedia=[],this.savedMedia=[],this.addedMedia=[],await he(()=>{this.init()})}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{VueSplash:we}},Q=i=>(ue("data-v-350c5c47"),i=i(),ce(),i),Ie={class:"mu-elements-wraper"},Se={class:"mu-plusbox-container"},Ve=Q(()=>n("label",{for:"mu-file-input",class:"mu-plusbox"},[n("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[n("g",{fill:"none"},[n("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),Te=["src"],$e=["onClick"],Fe=Q(()=>n("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[n("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Le=[Fe],Be=["src"],Pe=["onClick"],je=Q(()=>n("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[n("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Ee=[je],De=["value"],Ke=["value"],Oe={key:0,class:"mu-mt-1"},Ue=Q(()=>n("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)),Re=[Ue];function qe(i,u,h,l,p,I){const _=a("vue-splash");return s(),C("div",null,[n("div",{class:Ce(["mu-container",h.isInvalid?"mu-red-border":""])},[e(_,{show:p.isLoading,logo:"/icons/telegram.svg",title:"Загрузка...",color:"#84b5e3",size:90},null,8,["show"]),n("div",Ie,[k("UPLOAD BUTTON"),n("div",Se,[Ve,n("input",{onChange:u[0]||(u[0]=(...M)=>I.fileChange&&I.fileChange(...M)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)]),k("IMAGES PREVIEW"),(s(!0),C(j,null,R(p.savedMedia,(M,b)=>(s(),C("div",{key:b,class:"mu-image-container"},[n("img",{src:M.name,alt:"",class:"mu-images-preview"},null,8,Te),n("button",{onClick:V=>I.removeSavedMedia(b),class:"mu-close-btn",type:"button"},Le,8,$e)]))),128)),(s(!0),C(j,null,R(p.addedMedia,(M,b)=>(s(),C("div",{key:b,class:"mu-image-container"},[n("img",{src:M.url,alt:"",class:"mu-images-preview"},null,8,Be),n("button",{onClick:V=>I.removeAddedMedia(b),class:"mu-close-btn",type:"button"},Ee,8,Pe)]))),128))])],2),n("div",null,[(s(!0),C(j,null,R(p.addedMedia,(M,b)=>(s(),C("div",{key:b,class:"mu-mt-1"},[n("input",{type:"text",name:"added_media[]",value:M.name,hidden:""},null,8,De)]))),128)),(s(!0),C(j,null,R(p.removedMedia,(M,b)=>(s(),C("div",{key:b,class:"mu-mt-1"},[n("input",{type:"text",name:"removed_media[]",value:M.name,hidden:""},null,8,Ke)]))),128)),I.allMedia.length?(s(),C("div",Oe,Re)):k("v-if",!0)])])}const ze=se(Ae,[["render",qe],["__scopeId","data-v-350c5c47"],["__file","C:/OSPanel/domains/tgMailer/resources/js/components/inputs/Uploader.vue"]]),S=i=>(ue("data-v-b23bd2e3"),i=i(),ce(),i),He={class:"mb-3"},Ne=S(()=>n("strong",null,"Сообщение",-1)),Je={class:"mb-3"},We=S(()=>n("strong",null,"Статус ",-1)),Ye=S(()=>n("option",{value:"0"},"Открыть меню выбора",-1)),Ge=S(()=>n("option",{value:"1"},"В очереди",-1)),Qe=S(()=>n("option",{value:"2"},"Выполняется",-1)),Xe=S(()=>n("option",{value:"3"},"Завершена",-1)),Ze=S(()=>n("option",{value:"5"},"Отменена",-1)),et={key:0,class:"mb-3"},tt=S(()=>n("strong",null,"Прогресс рассылки",-1)),lt={class:"mb-3"},ot=S(()=>n("strong",null,"Дата начала ",-1)),at={key:1,class:"mb-3"},nt=S(()=>n("strong",null,"Картинки",-1)),st={key:2,class:"mb-3"},it=S(()=>n("strong",null,"Inline Keyboard",-1)),dt={key:3,class:"mb-3"},rt=S(()=>n("strong",null,"Reply Keyboard",-1)),ut=me({__name:"MailingModal",props:{mailingId:{type:[Number,null],required:!0},isVisible:{type:Boolean},isEdit:{type:Boolean,required:!0,default:!1},closeModal:{type:Function,required:!0}},setup(i){const u=i,h=pe(),{item:l,errors:p}=_e(h),I=()=>({saved:[],added:[]}),_=ye(I());re(()=>u.isVisible,(c,m)=>{(c||!c)&&Object.assign(_,I())}),re(()=>u.mailingId,async(c,m)=>{c&&(await h.getItem("bots/mailings/"+c),l.value.photosFiles=[],l.value.photos.forEach((E,x)=>{_.saved.push({name:E})}))});const M=c=>{typeof c=="string"?l.value.inlineKeyboard=JSON.parse(c):typeof c=="object"&&(l.value.inlineKeyboard=c)},b=c=>{typeof c=="string"?l.value.replyKeyboard=JSON.parse(c):typeof c=="object"&&(l.value.replyKeyboard=c)},V=(c,m)=>{_.added=m},q=(c,m)=>{l.value.photos.filter((E,x)=>{E===c.name&&l.value.photos.splice(x,1)}),l.value.photos.length===0&&(l.value.photos=[])},z=J(null),X=()=>{p.value=[],_.added.length>0&&(l.value.photosFiles=[],_.added.forEach((c,m)=>{l.value.photosFiles.push(c.file)})),l.value.replyKeyboard!==null&&l.value.replyKeyboard.length===0&&(l.value.replyKeyboard=null),l.value.inlineKeyboard!==null&&l.value.inlineKeyboard.length===0&&(l.value.inlineKeyboard=null),l.value.photos.length===0&&l.value.photosFiles.length===0&&O.swalMessage("error","Минимальное количество картинок: 1"),h.update("bots/mailings/"+l.value.id).then(()=>{l.value.photosFiles=[],Object.assign(_,I()),l.value.photos.forEach((c,m)=>{_.saved.push({name:c})}),z.value.clearMediaAndDownload()})};return(c,m)=>{const E=a("CModalTitle"),x=a("CModalHeader"),r=a("CFormLabel"),Z=a("CFormTextarea"),D=a("CCol"),w=a("CIcon"),F=a("CTooltip"),U=a("CFormSelect"),ee=a("CProgressBar"),L=a("CProgress"),T=a("VueDatePicker"),W=a("CImage"),te=a("CCarouselItem"),le=a("CCarousel"),Y=a("JsonEditor"),oe=a("CForm"),G=a("CModalBody"),H=a("CButton"),ae=a("CModalFooter"),$=a("CModal");return s(),v($,{alignment:"center",visible:i.isVisible&&o(l)!==null,onClose:m[7]||(m[7]=f=>i.closeModal())},{default:t(()=>[e(x,null,{default:t(()=>[e(E,null,{default:t(()=>[g("Рассылка № "+A(o(l).id),1)]),_:1})]),_:1}),e(G,null,{default:t(()=>[e(oe,{class:"w-100"},{default:t(()=>[n("div",He,[e(r,{for:"message"},{default:t(()=>[Ne]),_:1}),i.isEdit?(s(),v(Z,{key:0,rows:"3",id:"message",floatingLabel:"Сообщение",placeholder:"Сообщение",modelValue:o(l).message,"onUpdate:modelValue":m[0]||(m[0]=f=>o(l).message=f),valid:!Object.prototype.hasOwnProperty.call(o(p),"message"),invalid:Object.prototype.hasOwnProperty.call(o(p),"message"),feedback:Object.prototype.hasOwnProperty.call(o(p),"message")?o(p).message.join(`;
`):""},null,8,["modelValue","valid","invalid","feedback"])):(s(),v(D,{key:1},{default:t(()=>[g(A(o(l).message),1)]),_:1}))]),n("div",Je,[e(r,{for:"floatingSelect"},{default:t(()=>[We,i.isEdit?(s(),v(F,{key:0,content:"Статус 'Выполняется' может быть установлен только программно, при установке его вручную он будет проигнорирован",placement:"bottom"},{toggler:t(({on:f})=>[e(w,B({icon:"cilInfo"},P(f)),null,16)]),_:1})):k("v-if",!0)]),_:1}),i.isEdit?(s(),v(U,{key:0,id:"floatingSelect",floatingLabel:"Статус","aria-label":"Статус",value:o(l).statusId,onChange:m[1]||(m[1]=f=>o(l).statusId=Number(f.target.value)),valid:!Object.prototype.hasOwnProperty.call(o(p),"statusId"),invalid:Object.prototype.hasOwnProperty.call(o(p),"statusId"),feedback:Object.prototype.hasOwnProperty.call(o(p),"statusId")?o(p).statusId.join(`;
`):""},{default:t(()=>[Ye,Ge,Qe,Xe,Ze]),_:1},8,["value","valid","invalid","feedback"])):(s(),v(D,{key:1},{default:t(()=>[g(A(o(l).status.title),1)]),_:1}))]),i.isEdit?k("v-if",!0):(s(),C("div",et,[e(r,{for:"chatsInput"},{default:t(()=>[tt]),_:1}),e(F,{content:"Выполнено "+o(l).countCompletedChats+" из "+o(l).countChats,placement:"bottom"},{toggler:t(({on:f})=>[e(L,B({class:"mb-3"},P(f)),{default:t(()=>[e(ee,{color:"success",variant:"striped",animated:"",value:o(l).countCompletedChats*100/o(l).countChats},null,8,["value"])]),_:2},1040)]),_:1},8,["content"])])),n("div",lt,[e(r,{for:"requiredStartAt"},{default:t(()=>[ot,i.isEdit?(s(),v(F,{key:0,content:"Дата начала будет изменена только при статусе 'В очереди'",placement:"bottom"},{toggler:t(({on:f})=>[e(w,B({icon:"cilInfo"},P(f)),null,16)]),_:1})):k("v-if",!0)]),_:1}),i.isEdit?(s(),v(T,{key:0,modelValue:o(l).requiredStartAt,"onUpdate:modelValue":m[2]||(m[2]=f=>o(l).requiredStartAt=f),"model-type":"dd.MM.yyyy HH:mm",id:"requiredStartAt","min-date":new Date,required:""},null,8,["modelValue","min-date"])):(s(),v(D,{key:1},{default:t(()=>[g(A(o(l).requiredStartAt),1)]),_:1}))]),i.isEdit||o(l).photos!==null?(s(),C("div",at,[e(r,{for:"imagesInput"},{default:t(()=>[nt]),_:1}),i.isEdit?(s(),v(ze,{key:0,media:_.saved,onAdd:V,onRemove:q,ref_key:"myReference",ref:z},null,8,["media"])):(s(),v(le,{key:1,controls:"",indicators:""},{default:t(()=>[(s(!0),C(j,null,R(o(l).photos,(f,ie)=>(s(),v(te,null,{default:t(()=>[e(W,{fluid:"",src:f},null,8,["src"])]),_:2},1024))),256))]),_:1}))])):k("v-if",!0),i.isEdit||o(l).inlineKeyboard!==null?(s(),C("div",st,[e(r,{for:"inlineKeyboard"},{default:t(()=>[it]),_:1}),i.isEdit?(s(),v(Y,{key:0,height:"400",mode:"tree",json:o(l).inlineKeyboard,"onUpdate:json":m[3]||(m[3]=f=>o(l).inlineKeyboard=f),fullWidthButton:!1,darkTheme:!0,"onUpdate:modelValue":M},null,8,["json"])):(s(),v(D,{key:1},{default:t(()=>[n("pre",null,A(o(l).inlineKeyboard),1)]),_:1}))])):k("v-if",!0),i.isEdit||o(l).replyKeyboard!==null?(s(),C("div",dt,[e(r,{for:"replyKeyboard"},{default:t(()=>[rt]),_:1}),i.isEdit?(s(),v(Y,{key:0,height:"400",mode:"tree",json:o(l).replyKeyboard,"onUpdate:json":m[4]||(m[4]=f=>o(l).replyKeyboard=f),fullWidthButton:!1,darkTheme:!0,"onUpdate:modelValue":b},null,8,["json"])):(s(),v(D,{key:1},{default:t(()=>[n("pre",null,A(o(l).replyKeyboard),1)]),_:1}))])):k("v-if",!0)]),_:1})]),_:1}),e(ae,null,{default:t(()=>[i.isEdit?(s(),v(H,{key:0,color:"success",class:"text-white",onClick:m[5]||(m[5]=f=>X())},{default:t(()=>[g(" Изменить ")]),_:1})):k("v-if",!0),e(H,{color:"secondary",class:"text-white",onClick:m[6]||(m[6]=f=>i.closeModal())},{default:t(()=>[g(" Закрыть ")]),_:1})]),_:1})]),_:1},8,["visible"])}}});const ct=se(ut,[["__scopeId","data-v-b23bd2e3"],["__file","C:/OSPanel/domains/tgMailer/resources/js/modals/MailingModal.vue"]]),mt=n("option",{value:""},"Открыть меню выбора",-1),pt=n("option",{value:"1"},"В очереди",-1),_t=n("option",{value:"2"},"Выполняется",-1),ft=n("option",{value:"3"},"Завершена",-1),vt=n("strong",null,"Удалить все рассылки, дата окончания которых ранее, чем ",-1),gt=me({__name:"TelegramMailings",setup(i){const u=J(!1),h=J(!1),l=pe(),{data:p,isLoading:I,searchParams:_,item:M}=_e(l),b=["warning","primary","success"],V=J(null);be(()=>{l.getData()}),Me(()=>{l.setDefaultStore()});const q=J(null),z=(x,r=!1)=>{q.value=x,u.value=!0,h.value=r},X=()=>{q.value=null,M.value=null,u.value=!u.value,h.value=!h.value,l.getData()},c=x=>{O.actionModal().then(r=>{r.isConfirmed&&l.destroy("bots/mailings/"+x)})},m=()=>{V.value===null?O.swalMessage("error","Для массового удаления необходимо заполнить дату"):O.actionModal("warning","Вы действительно хотите удалить все рассылки, дата окончания которых ранее, чем "+V.value+"?","Отменить действие будет невозможно.").then(x=>{x.isConfirmed&&l.multipleDestroy("bots/mailings/multiple/destroy",{dateToDelete:V.value,botId:xe.currentRoute._rawValue.params.botId}).then(()=>{V.value=null})})},E=x=>{O.actionModal("warning","Вы действительно хотите перезапустить рассылку?","Она сразу отправится в очередь на выполнение","Рассылка была перезапущена и поставлена в очередь","Возобновление рассылки отменено").then(r=>{r.isConfirmed&&l.updateWithoutFiles("bots/mailings/restart/"+x).then(()=>{l.getData()})})};return(x,r)=>{const Z=a("CAccordionHeader"),D=a("CFormTextarea"),w=a("CCol"),F=a("CFormLabel"),U=a("VueDatePicker"),ee=a("CFormSelect"),L=a("CIcon"),T=a("CButton"),W=a("CRow"),te=a("CAccordionBody"),le=a("CAccordionItem"),Y=a("CAccordion"),oe=a("CForm"),G=a("CTableHeaderCell"),H=a("CTableRow"),ae=a("CTableHead"),$=a("CTableDataCell"),f=a("CProgressBar"),ie=a("CProgress"),N=a("CTooltip"),de=a("CBadge"),fe=a("CTableBody"),ve=a("CTable"),ge=a("CAlert");return s(),C(j,null,[e(Y,{flush:"","active-item-key":1,"always-open":"",class:"mb-3"},{default:t(()=>[e(le,{"item-key":1},{default:t(()=>[e(Z,null,{default:t(()=>[g(" Поиск... ")]),_:1}),e(te,null,{default:t(()=>[e(W,{class:"gap-2"},{default:t(()=>[e(w,{xl:"12",xxl:"12"},{default:t(()=>[e(D,{id:"message",floatingLabel:"Сообщение",placeholder:"Сообщение",modelValue:o(_).message,"onUpdate:modelValue":r[0]||(r[0]=d=>o(_).message=d)},null,8,["modelValue"])]),_:1}),e(w,{xl:"12",xxl:"12"},{default:t(()=>[e(F,{for:"requiredStartAt"},{default:t(()=>[g("Дата начала")]),_:1}),e(U,{range:"","multi-calendars":"",id:"requiredStartAt",modelValue:o(_).requiredStartAt,"onUpdate:modelValue":r[1]||(r[1]=d=>o(_).requiredStartAt=d)},null,8,["modelValue"])]),_:1}),e(w,{xl:"12",xxl:"12"},{default:t(()=>[e(F,{for:"actualStartAt"},{default:t(()=>[g("Фактическая дата начала")]),_:1}),e(U,{range:"","multi-calendars":"",id:"actualStartAt",modelValue:o(_).actualStartAt,"onUpdate:modelValue":r[2]||(r[2]=d=>o(_).actualStartAt=d)},null,8,["modelValue"])]),_:1}),e(w,{xl:"12",xxl:"12"},{default:t(()=>[e(F,{for:"endAt"},{default:t(()=>[g("Дата окончания")]),_:1}),e(U,{range:"","multi-calendars":"",id:"endAt",modelValue:o(_).endAt,"onUpdate:modelValue":r[3]||(r[3]=d=>o(_).endAt=d)},null,8,["modelValue"])]),_:1}),e(w,{xl:"12",xxl:"12"},{default:t(()=>[e(ee,{id:"statusId",floatingLabel:"Статус","aria-label":"Статус",modelValue:o(_).statusId,"onUpdate:modelValue":r[4]||(r[4]=d=>o(_).statusId=d)},{default:t(()=>[mt,pt,_t,ft]),_:1},8,["modelValue"])]),_:1}),e(w,{class:"d-flex justify-content-between"},{default:t(()=>[e(T,{color:"danger",variant:"ghost",class:"d-flex border-0",onClick:r[5]||(r[5]=d=>_.value={})},{default:t(()=>[e(L,{icon:"cilClearAll",size:"xl",class:"me-1"}),g(" Очистить все поля ")]),_:1}),e(T,{color:"info",variant:"ghost",class:"d-flex border-0",onClick:r[6]||(r[6]=d=>o(l).getData())},{default:t(()=>[e(L,{icon:"cilSearch",size:"xl",class:"me-1"}),g(" Поиск ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),!o(I)&&o(p).length>0?(s(),C(j,{key:0},[e(oe,{class:"d-flex justify-content-end mb-3"},{default:t(()=>[e(w,{xl:"auto",xxl:"auto",lg:"auto",md:"auto",sm:"auto",class:"p-0"},{default:t(()=>[e(F,{for:"dateToDelete"},{default:t(()=>[vt]),_:1}),e(W,{class:"gap-2 m-0"},{default:t(()=>[e(w,{xl:"",xxl:"",lg:"",md:"",sm:"",class:"p-0"},{default:t(()=>[e(U,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=d=>V.value=d),id:"dateToDelete","max-date":new Date,"model-type":"dd.MM.yyyy HH:mm",required:""},null,8,["modelValue","max-date"])]),_:1}),e(w,{xl:"auto",xxl:"auto",lg:"auto",md:"auto",sm:"auto",class:"d-flex p-0"},{default:t(()=>[e(T,{class:"w-100",color:"primary",onClick:r[8]||(r[8]=d=>m())},{default:t(()=>[g("Удалить")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ve,{bordered:"",hover:"",responsive:""},{default:t(()=>[e(ae,null,{default:t(()=>[e(H,null,{default:t(()=>[e(K,{property:"id",name:"ID"}),e(K,{property:"message",name:"Сообщение"}),e(K,{property:"requiredStartAt",name:"Дата начала"}),e(K,{property:"actualStartAt",name:"Фактическая дата начала"}),e(K,{property:"endAt",name:"Дата окончания"}),e(K,{property:"countCompletedChats",name:"Прогресс рассылки"}),e(K,{property:"status",name:"Статус"}),e(G,{scope:"col"},{default:t(()=>[g("Действия")]),_:1})]),_:1})]),_:1}),e(fe,null,{default:t(()=>[(s(!0),C(j,null,R(o(p),d=>(s(),v(H,null,{default:t(()=>[e(G,{scope:"row"},{default:t(()=>[g(A(d.id),1)]),_:2},1024),e($,null,{default:t(()=>[g(A(d.message),1)]),_:2},1024),e($,null,{default:t(()=>[g(A(d.requiredStartAt),1)]),_:2},1024),e($,null,{default:t(()=>[g(A(d.actualStartAt?d.actualStartAt:"Не началась"),1)]),_:2},1024),e($,null,{default:t(()=>[g(A(d.endAt?d.endAt:"Не закончилась"),1)]),_:2},1024),e($,null,{default:t(()=>[e(N,{content:"Выполнено "+d.countCompletedChats+" из "+d.countChats,placement:"bottom"},{toggler:t(({on:y})=>[e(ie,B({class:"mb-3"},P(y)),{default:t(()=>[e(f,{color:"success",variant:"striped",animated:"",value:d.countCompletedChats*100/d.countChats},null,8,["value"])]),_:2},1040)]),_:2},1032,["content"])]),_:2},1024),e($,null,{default:t(()=>[b.length>d.statusId-1?(s(),v(de,{key:0,color:b[d.statusId-1],shape:"rounded-pill"},{default:t(()=>{var y;return[g(A((y=d.status)==null?void 0:y.title),1)]}),_:2},1032,["color"])):(s(),v(de,{key:1,color:"danger",shape:"rounded-pill"},{default:t(()=>{var y;return[g(A((y=d.status)==null?void 0:y.title),1)]}),_:2},1024))]),_:2},1024),e($,null,{default:t(()=>[e(w,{class:"d-flex gap-2"},{default:t(()=>[e(N,{content:"Просмотр",placement:"bottom"},{toggler:t(({on:y})=>[e(T,B({color:"info"},P(y),{class:"text-white",shape:"rounded-pill",onClick:ne=>z(d.id)}),{default:t(()=>[e(L,{icon:"cilInfo"})]),_:2},1040,["onClick"])]),_:2},1024),e(N,{content:"Редактировать",placement:"bottom"},{toggler:t(({on:y})=>[e(T,B({color:"warning"},P(y),{class:"text-white",shape:"rounded-pill",onClick:ne=>z(d.id,!0)}),{default:t(()=>[e(L,{icon:"cilPencil"})]),_:2},1040,["onClick"])]),_:2},1024),e(N,{content:"Удалить",placement:"bottom"},{toggler:t(({on:y})=>[e(T,B({color:"danger"},P(y),{class:"text-white",shape:"rounded-pill",onClick:ne=>c(d.id)}),{default:t(()=>[e(L,{icon:"cilTrash"})]),_:2},1040,["onClick"])]),_:2},1024),d.statusId>=3?(s(),v(N,{key:0,content:"Возобновить",placement:"bottom"},{toggler:t(({on:y})=>[e(T,B({color:"primary"},P(y),{class:"text-white",shape:"rounded-pill",onClick:ne=>E(d.id)}),{default:t(()=>[e(L,{icon:"cilActionRedo"})]),_:2},1040,["onClick"])]),_:2},1024)):k("v-if",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),e(ke)],64)):k("v-if",!0),!o(I)&&o(p).length<=0?(s(),v(ge,{key:1,color:"info"},{default:t(()=>[g("По данному запросу данных не найдено")]),_:1})):k("v-if",!0),e(ct,{"mailing-id":q.value,"is-visible":u.value,"is-edit":h.value,"close-modal":X},null,8,["mailing-id","is-visible","is-edit"])],64)}}}),bt=se(gt,[["__file","C:/OSPanel/domains/tgMailer/resources/js/pages/TelegramMailings.vue"]]);export{bt as default};
