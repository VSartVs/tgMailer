import{d as O,u as G,s as J,r as K,h as Q,k as W,a as t,j as y,g as e,e as o,i as n,F as v,b as w,c as A,o as i,f as s,l as X,m as f,C as h,t as _,_ as Y}from"./app-f1448b6c.js";import{H as p,P as Z}from"./HeaderCell-90741bce.js";const ee=f("option",{value:""},"Открыть меню выбора",-1),oe=f("option",{value:"400"},"400",-1),te=f("option",{value:"403"},"403",-1),le=f("option",{value:"404"},"404",-1),ae=f("strong",null,"Удалить все заблокированные чата, дата создания которых ранее, чем ",-1),ne=O({__name:"BlockChats",setup(se){const c=G(),{data:b,isLoading:k,searchParams:u}=J(c),r=K(null);Q(()=>{c.getData()}),W(()=>{c.setDefaultStore()});const I=C=>{h.actionModal().then(a=>{a.isConfirmed&&c.destroy("block/chats/"+C)})},F=()=>{r.value===null?h.swalMessage("error","Для массового удаления необходимо заполнить дату"):h.actionModal("warning","Вы действительно хотите удалить все заблокированные чаты, дата создания которых ранее, чем "+r.value+"?","Отменить действие будет невозможно.").then(C=>{C.isConfirmed&&c.multipleDestroy("block/chats/multiple/destroy",{dateToDelete:r.value}).then(()=>{r.value=null})})};return(C,a)=>{const H=t("CAccordionHeader"),T=t("CFormInput"),d=t("CCol"),N=t("CFormSelect"),g=t("CIcon"),x=t("CButton"),V=t("CRow"),S=t("CAccordionBody"),M=t("CAccordionItem"),L=t("CAccordion"),P=t("CFormLabel"),R=t("VueDatePicker"),U=t("CForm"),D=t("CTableHeaderCell"),B=t("CTableRow"),j=t("CTableHead"),m=t("CTableDataCell"),$=t("CBadge"),z=t("CTableBody"),q=t("CTable"),E=t("CAlert");return i(),y(v,null,[e(L,{flush:"","active-item-key":1,"always-open":"",class:"mb-3"},{default:o(()=>[e(M,{"item-key":1},{default:o(()=>[e(H,null,{default:o(()=>[s(" Поиск... ")]),_:1}),e(S,null,{default:o(()=>[e(V,{class:"gap-2"},{default:o(()=>[e(d,{xl:"12",xxl:"12"},{default:o(()=>[e(T,{id:"botName","floating-label":"Имя бота",placeholder:"Имя бота",modelValue:n(u).botName,"onUpdate:modelValue":a[0]||(a[0]=l=>n(u).botName=l)},null,8,["modelValue"])]),_:1}),e(d,{xl:"12",xxl:"12"},{default:o(()=>[e(T,{id:"chatId","floating-label":"Номер чата",placeholder:"Номер чата",modelValue:n(u).chatId,"onUpdate:modelValue":a[1]||(a[1]=l=>n(u).chatId=l),type:"number"},null,8,["modelValue"])]),_:1}),e(d,{xl:"12",xxl:"12"},{default:o(()=>[e(N,{id:"type",floatingLabel:"Код ошибки","aria-label":"Код ошибки",modelValue:n(u).status,"onUpdate:modelValue":a[2]||(a[2]=l=>n(u).status=l)},{default:o(()=>[ee,oe,te,le]),_:1},8,["modelValue"])]),_:1}),e(d,{class:"d-flex justify-content-between"},{default:o(()=>[e(x,{color:"danger",variant:"ghost",class:"d-flex border-0",onClick:a[3]||(a[3]=l=>u.value={})},{default:o(()=>[e(g,{icon:"cilClearAll",size:"xl",class:"me-1"}),s(" Очистить все поля ")]),_:1}),e(x,{color:"info",variant:"ghost",class:"d-flex border-0",onClick:a[4]||(a[4]=l=>n(c).getData())},{default:o(()=>[e(g,{icon:"cilSearch",size:"xl",class:"me-1"}),s(" Поиск ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),!n(k)&&n(b).length>0?(i(),y(v,{key:0},[e(U,{class:"d-flex justify-content-end mb-3"},{default:o(()=>[e(d,{xl:"auto",xxl:"auto",lg:"auto",md:"auto",sm:"auto",class:"p-0"},{default:o(()=>[e(P,{for:"dateToDelete"},{default:o(()=>[ae]),_:1}),e(V,{class:"gap-2 m-0"},{default:o(()=>[e(d,{xl:"",xxl:"",lg:"",md:"",sm:"",class:"p-0"},{default:o(()=>[e(R,{modelValue:r.value,"onUpdate:modelValue":a[5]||(a[5]=l=>r.value=l),id:"dateToDelete","max-date":new Date,"model-type":"yyyy-MM-dd HH:mm:ss",required:""},null,8,["modelValue","max-date"])]),_:1}),e(d,{xl:"auto",xxl:"auto",lg:"auto",md:"auto",sm:"auto",class:"d-flex p-0"},{default:o(()=>[e(x,{class:"w-100",color:"primary",onClick:a[6]||(a[6]=l=>F())},{default:o(()=>[s("Удалить")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{bordered:"",hover:"",responsive:""},{default:o(()=>[e(j,null,{default:o(()=>[e(B,null,{default:o(()=>[e(p,{property:"id",name:"ID"}),e(p,{property:"botName",name:"Имя бота"}),e(p,{property:"chatId",name:"Номер чата"}),e(p,{property:"status",name:"Код ошибки"}),e(p,{property:"createdAt",name:"Дата создания"}),e(D,{scope:"col"},{default:o(()=>[s("Действия")]),_:1})]),_:1})]),_:1}),e(z,null,{default:o(()=>[(i(!0),y(v,null,X(n(b),l=>(i(),A(B,null,{default:o(()=>[e(D,{scope:"row"},{default:o(()=>[s(_(l.id),1)]),_:2},1024),e(m,null,{default:o(()=>[s(_(l.bot.name),1)]),_:2},1024),e(m,null,{default:o(()=>[s(_(l.chatId),1)]),_:2},1024),e(m,null,{default:o(()=>[e($,{color:l.status==="403"?"danger":"warning",shape:"rounded-pill"},{default:o(()=>[s(_(l.status),1)]),_:2},1032,["color"])]),_:2},1024),e(m,null,{default:o(()=>[s(_(l.createdAt===null?"-":l.createdAt),1)]),_:2},1024),e(m,null,{default:o(()=>[e(d,{class:"d-flex gap-2"},{default:o(()=>[e(x,{color:"danger",class:"text-white",shape:"rounded-pill",onClick:de=>I(l.id)},{default:o(()=>[e(g,{icon:"cilTrash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),e(Z)],64)):w("v-if",!0),!n(k)&&n(b).length<=0?(i(),A(E,{key:1,color:"info"},{default:o(()=>[s("По данному запросу данных не найдено")]),_:1})):w("v-if",!0)],64)}}}),re=Y(ne,[["__file","C:/OSPanel/domains/tgMailer/resources/js/pages/BlockChats.vue"]]);export{re as default};
